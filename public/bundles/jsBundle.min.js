!function(){"use strict";function t(t,e){t.state("Home",{url:"/home",templateUrl:"views/home.html"}).state("Login",{url:"/",templateUrl:"views/login.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}),e.otherwise("/")}angular.module("app",["ui.router","ui.bootstrap","dialogs"]).config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,e){function o(o){var s=e.defer();return t.post("/v1/api/Post",o).success(function(t){o._id=t.id,o.dateCreated=new Date,a.posts.push(o),s.resolve()}).error(function(t){s.reject(t)}),s.promise}function s(e){t.post("/v1/api/deletePost/"+e._id).success(function(t){a.posts.splice(a.posts.indexOf(e),1)})}function n(o){var s=e.defer();return t.get("/v1/api/Post/"+o).success(function(t){s.resolve(t)}),s.promise}function r(){t.get("/v1/api/Post").success(function(t){for(var e=0;e<t.length;e+=1)t[e].dateCreated=new Date(t[e].dateCreated),a.posts.push(t[e])})}var a={};return a.posts=[],a.postPost=o,a.deletePost=s,a.getPost=n,r(),a}angular.module("app").factory("HomeFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e){function o(o){var s=e.defer();return t.post("/api/Users/Register",o).success(function(t){r(t.token),l.status.isLoggedIn=!0,s.resolve()}),s.promise}function s(o){var s={username:o.username.toLowerCase(),password:o.password},n=e.defer();return t.post("/api/Users/Login",s).success(function(t){r(t.token),l.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){l.status.isLoggedIn=!1,i()}function r(t){localStorage.setItem("token",t),l.status.username=u()}function a(){return localStorage.token}function i(){localStorage.removeItem("token"),l.status.username=null}function u(){return JSON.parse(atob(a().split(".")[1])).username}var l={};return l.status={},a()&&(l.status.isLoggedIn=!0,l.status.username=u()),l.setToken=r,l.getToken=a,l.removeToken=i,l.register=o,l.login=s,l.logout=n,l}angular.module("app").factory("UserFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e){var o=this;o.posts=t.posts}angular.module("app").controller("homeController",t),t.$inject=["HomeFactory","UserFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.status={isopen:!1},o.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),o.status.isopen=!o.status.isopen}}angular.module("app").controller("indexController",t),t.$inject=["$modal","$dialogs"]}(),function(){"use strict";function t(t,e){function o(){var o=n.user;return o.username&&o.password&&o.cpassword&&o.password===o.cpassword?void t.register(o).then(function(){e.go("Home")}):!1}function s(){t.login(n.user).then(function(){e.go("Home")})}var n=this;n.user={},n.status=t.status,n.register=o,n.login=s,n.logout=t.logout}angular.module("app").controller("loginController",t),t.$inject=["UserFactory","$state"]}(),function(){"use strict";function t(t,e,o){var s=this;s.post={},s.open=function(){var n=t.open({templateUrl:"views/modal.html",controller:"ModalInstanceCtrl",resolve:{params:function(){return{key:"value",key2:"value2"}}}});n.result.then(function(t){s.post.content=t,s.post.username=o.status.username,e.postPost(s.post)},function(t){console.log("called $modalInstance.dismiss()")})}}angular.module("app").controller("ModalCtrl",t),t.$inject=["$modal","HomeFactory","UserFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.ok=function(){e.close("this is result for close")},o.cancel=function(){e.dismiss("this is result for dismiss")}}angular.module("app").controller("ModalInstanceCtrl",t),t.$inject=["$modal"]}();