!function(){"use strict";function t(t,e){t.state("Home",{url:"/home",templateUrl:"views/home.html"}).state("Login",{url:"/",templateUrl:"views/login.html"}).state("Profile",{url:"/Profile",templateUrl:"views/profile.html"}).state("Register",{url:"/Register",templateUrl:"views/register.html"}),e.otherwise("/")}angular.module("app",["ui.router","ui.bootstrap","dialogs"]).config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){var e=this;e.posts=t.posts,console.log(e.posts)}angular.module("app").controller("homeController",t),t.$inject=["HomeFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.status={isopen:!1},o.toggleDropdown=function(t){t.preventDefault(),t.stopPropagation(),o.status.isopen=!o.status.isopen}}angular.module("app").controller("indexController",t),t.$inject=["$modal","$dialogs"]}(),function(){"use strict";function t(t,e){function o(){var o=n.user;return o.username&&o.password&&o.cpassword&&o.password===o.cpassword?void t.register(o).then(function(){e.go("Home")}):!1}function s(){t.login(n.user).then(function(){e.go("Home")})}var n=this;n.user={},n.status=t.status,n.register=o,n.login=s,n.logout=t.logout}angular.module("app").controller("loginController",t),t.$inject=["UserFactory","$state"]}(),function(){"use strict";function t(t,e){var o=this;o.post={},o.open=function(){var s=t.open({templateUrl:"views/modal.html",controller:"ModalInstanceCtrl",resolve:{params:function(){return{key:"value",key2:"value2"}}}});s.result.then(function(t){o.post.content=t,e.postPost(o.post),console.log(o.post)},function(t){console.log("called $modalInstance.dismiss()")})}}angular.module("app").controller("ModalCtrl",t),t.$inject=["$modal","HomeFactory"]}(),function(){"use strict";function t(t,e){var o=this;o.ok=function(){e.close("this is result for close")},o.cancel=function(){e.dismiss("this is result for dismiss")}}angular.module("app").controller("ModalInstanceCtrl",t),t.$inject=["$modal"]}(),function(){"use strict";function t(t,e){function o(o){var s=e.defer();return t.post("/v1/api/Post",o).success(function(t){o._id=t.id,o.dateCreated=new Date,r.posts.push(o),s.resolve()}).error(function(t){s.reject(t)}),s.promise}function s(e){t.post("/v1/api/deletePost/"+e._id).success(function(t){r.posts.splice(r.posts.indexOf(e),1)})}function n(o){var s=e.defer();return t.get("/v1/api/Post/"+o).success(function(t){s.resolve(t)}),s.promise}var r={};return r.posts=[],r.postPost=o,r.deletePost=s,r.getPost=n,r}angular.module("app").factory("HomeFactory",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,e){function o(o){var s=e.defer();return t.post("/api/Users/Register",o).success(function(t){r(t.token),l.status.isLoggedIn=!0,s.resolve()}),s.promise}function s(o){var s={username:o.username.toLowerCase(),password:o.password},n=e.defer();return t.post("/api/Users/Login",s).success(function(t){r(t.token),l.status.isLoggedIn=!0,n.resolve()}),n.promise}function n(){l.status.isLoggedIn=!1,u()}function r(t){localStorage.setItem("token",t),l.status.username=a()}function i(){return localStorage.token}function u(){localStorage.removeItem("token"),l.status.username=null}function a(){return JSON.parse(atob(i().split(".")[1])).username}var l={};return l.status={},i()&&(l.status.isLoggedIn=!0,l.status.username=a()),l.setToken=r,l.getToken=i,l.removeToken=u,l.register=o,l.login=s,l.logout=n,l}angular.module("app").factory("UserFactory",t),t.$inject=["$http","$q"]}();